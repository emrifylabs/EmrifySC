<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Insurance Interaction</title>
	<script src="http://rawgit.com/ethereum/web3.js/0.16.0/dist/web3.min.js"></script>
	<script
	  src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
	 <script>
		window.addEventListener('load', function() {

		  // Checking if Web3 has been injected by the browser (Mist/MetaMask)
		  if (typeof web3 !== 'undefined') {
		    // Use Mist/MetaMask's provider
		    web3 = new Web3(web3.currentProvider);
		  } else {
		    console.log('No web3? You should consider trying MetaMask!')
		    // fallback - use your fallback strategy (local node / hosted node + in-dapp id mgmt / fail)
		    web3 = new Web3(new Web3.providers.HttpProvider("https://ropsten.infura.io/jusRhRm9lPsVCXFLnnNk"));
		  }


      var abi =[
	{
		"constant": false,
		"inputs": [
			{
				"name": "_anyAddress",
				"type": "address"
			}
		],
		"name": "isOrgAndState",
		"outputs": [
			{
				"name": "",
				"type": "bool"
			}
		],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "_anyAddress",
				"type": "address"
			}
		],
		"name": "isOrg",
		"outputs": [
			{
				"name": "",
				"type": "bool"
			}
		],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "addr",
				"type": "address"
			}
		],
		"name": "isAdmin",
		"outputs": [
			{
				"name": "",
				"type": "bool"
			}
		],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "",
				"type": "address"
			}
		],
		"name": "AdminGroup",
		"outputs": [
			{
				"name": "",
				"type": "bool"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "returnApplicationRevoke",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "_providerAddress",
				"type": "address"
			}
		],
		"name": "rejectProviderApplication",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"name": "AcceptedList",
		"outputs": [
			{
				"name": "",
				"type": "address"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"name": "PendingList",
		"outputs": [
			{
				"name": "",
				"type": "address"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "totalAcceptedCount",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "",
				"type": "address"
			}
		],
		"name": "individualPendingCount",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "totalRevokeCount",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "returnApplicationAccepted",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "returnRejectedArray",
		"outputs": [
			{
				"name": "",
				"type": "address[]"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "_anyAddress",
				"type": "address"
			}
		],
		"name": "isState",
		"outputs": [
			{
				"name": "",
				"type": "bool"
			}
		],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "returnApplicationPending",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "",
				"type": "address"
			}
		],
		"name": "individualRevokeCount",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "returnApplicationRejected",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "totalPendingCount",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "",
				"type": "address"
			}
		],
		"name": "individualAcceptedCount",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "_isOrg",
				"type": "bool"
			},
			{
				"name": "_ProviderDetailsIPFShash",
				"type": "string"
			}
		],
		"name": "submitRequestForApproval",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "_providerAddress",
				"type": "address"
			}
		],
		"name": "revokeProviderApplication",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "_providerAddress",
				"type": "address"
			}
		],
		"name": "approveProviderApplication",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "_providerAddress",
				"type": "address"
			},
			{
				"name": "_supportingRejectingDocument",
				"type": "string"
			}
		],
		"name": "terminateProviderFromNetwork",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "_newAdminAddress",
				"type": "address"
			}
		],
		"name": "addAdminGroup",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "totalRejectedCount",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "returnRevokedArray",
		"outputs": [
			{
				"name": "",
				"type": "address[]"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "returnAcceptedArray",
		"outputs": [
			{
				"name": "",
				"type": "address[]"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "",
				"type": "address"
			}
		],
		"name": "individualRejectiedCount",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "",
				"type": "address"
			}
		],
		"name": "WhiteListedProviders",
		"outputs": [
			{
				"name": "providerAddress",
				"type": "address"
			},
			{
				"name": "state",
				"type": "uint8"
			},
			{
				"name": "isRegistered",
				"type": "bool"
			},
			{
				"name": "isOrganization",
				"type": "bool"
			},
			{
				"name": "IPFSApprovalDocumentHash",
				"type": "string"
			},
			{
				"name": "IPFSRemovalDocumentHash",
				"type": "string"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "returnPendingArray",
		"outputs": [
			{
				"name": "",
				"type": "address[]"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"name": "RevokeList",
		"outputs": [
			{
				"name": "",
				"type": "address"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "admin",
		"outputs": [
			{
				"name": "",
				"type": "address"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"name": "RejectedList",
		"outputs": [
			{
				"name": "",
				"type": "address"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "constructor"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"name": "newAdmin",
				"type": "address"
			}
		],
		"name": "NewAdminAdded",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"name": "_requsterAdd",
				"type": "address"
			},
			{
				"indexed": true,
				"name": "isOrg",
				"type": "bool"
			},
			{
				"indexed": false,
				"name": "ProviderDetailsIPFShash",
				"type": "string"
			},
			{
				"indexed": false,
				"name": "state",
				"type": "uint8"
			}
		],
		"name": "RequestSubmittedForApproval",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"name": "providerAddress",
				"type": "address"
			},
			{
				"indexed": false,
				"name": "_IPFSProviderhash",
				"type": "string"
			}
		],
		"name": "RequestApproved",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"name": "providerAddress",
				"type": "address"
			},
			{
				"indexed": false,
				"name": "_IPFSProviderhash",
				"type": "string"
			}
		],
		"name": "RequestRejected",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"name": "providerAddress",
				"type": "address"
			},
			{
				"indexed": false,
				"name": "_IPFSProviderhash",
				"type": "string"
			}
		],
		"name": "RequestRevoked",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"name": "providerAddress",
				"type": "address"
			},
			{
				"indexed": false,
				"name": "IPFSHash",
				"type": "string"
			}
		],
		"name": "Terminate",
		"type": "event"
	}
];

      var MyContract = web3.eth.contract(abi);
      
      var myContractInstance = MyContract.at('0x5be928b032f559ff1937f9efbd96a8fa471925b2');



    // Now you can start your app & access web3 freely:
      startApp(myContractInstance);
		})
  </script>
  </head>

  <body>

<h2>Add new Admin to the group: To be called only by the owner of the SC</h2>
<div>
    Admin Address : <input id="newAdminAdd">
</div>
<button onclick="addAdminGroup()" > Add this as an Admin!</button>
<hr/>
<p>Events generated for the adding new Admin:
        <h3 id='callbackNewAdmin'></h3>
    </p>
	<hr/>

<h2>Fetch all the current admins, other than Emrify ( because emrify shall be an admin by-default):</h2>

<button onclick="listOfAllAdmins()" > Fetch all admin list!</button>
<hr/>
<p>Admin list :
		<h3 id='callback25'></h3>
	</p>
	<hr/>

<h2>Utility to check whether any address is org or not ?</h2>
<div>
	validate Address(if org, or not) : <input id="validateAddressForOrg">
</div>
<button onclick="validateAddress()" > Validate Address ?</button>
<hr/>
<p>Events generated for the adding new Admin:
		<h3 id='callbackForIsOrg'></h3>
	</p>
	<hr/>

  <h2>Submit Request For Approval: To be called by individual entity or organisation</h2>
  <div>
    Is Org : <input id='isOrgBool'>
</div>
<div>
    Provider Details : <input id='providerDetails'>
</div>
<button onclick='submitRequestForApproval()'>Submit Provider Request!</button>
<hr/>
<p>Events generated for the Submit Request For Approval:
    <h3 id='callback1'></h3>
</p>
<hr/>


<button onclick="fetchAllPendingAddresses()" > Fetch all pending addresses !</button>
<hr/>
<p>all the Events generated for the pending Request For Approval:
        <h3 id='callback22'></h3>
    </p>
	<hr/>
	

<button onclick="fetchAllAcceptedAddresses()" > Fetch all Accepted addresses !</button>
<hr/>
<p>all the Events generated for the modification of the profile in already Accepted Request :
	<h3 id='acceptedCallback'></h3>
</p>
<hr/>
	
<button onclick="fetchAllRejectedAddresses()" > Fetch all Rejected addresses !</button>
<hr/>
<p>all the Events generated for the modification of the profile in already Accepted Request :
	<h3 id='rejectedCallback'></h3>
</p>
<hr/>

<button onclick="fetchAllRevokedAddresses()" > Fetch all Revoked addresses !</button>
<hr/>
<p>all the Events generated for the modification of the profile in already Accepted Request :
	<h3 id='revokedCallback'></h3>
</p>
<hr/>



<h2>Approve Provider Application : to be called by Emrify ONLY</h2>
<div>
  Provider Address : <input id='providerAddressForApproval'>
</div>
<button onclick='approveProviderApplication()'>Approve Provider!</button>
<hr/>
<p>Events generated for the Appproved provider :
    <h3 id='callback2'></h3>
</p>
<hr/>

<button onclick="fetchAllEventsforRequestAppproved()" > Fetch all approved events!</button>
<hr/>
<p>all the Events generated for the approved Request :
        <h3 id='callback23'></h3>
    </p>
	<hr/>

<h2> Reject Provider Application: To be called by individual entity or organisation</h2>
<div>
    Provider Address : <input id='providerAddressForRejection'>
</div>
<button onclick='rejectProviderApplication()'>Reject Provider!</button>
<hr/>
<p>Events generated for the rejected provider:
			<h3 id='callback3'></h3>
</p>

<hr/>



<button onclick="fetchAllEventsforRejectedRequests()" > Fetch all rejected requestd lists!</button>
<hr/>
<p>all the Requests which got rejected :
        <h3 id='callback24'></h3>
    </p>
	<hr/>


<h2> Revoke Provider Application: To be called by individual entity or organisation</h2>
<div>
	Provider Address : <input id='providerAddressForRevoking'>
</div>
<button onclick='revokeProviderApplication()'>Revoke Provider!</button>
<hr/>
<p>Events generated for the Revoke provider:
			<h3 id='callbackRevoke3'></h3>
</p>

<hr/>



<button onclick="fetchAllEventsforRevokedRequests()" > Fetch all revoked requestd lists!</button>
<hr/>
<p>all the Requests which got rejected :
		<h3 id='callbackrevoke24'></h3>
	</p>
	<hr/>
	

<h2> Terminate Provider Application: To be called by individual entity or organisation</h2>
<div>
    Provider Address : <input id='providerAddressForTermination'>
</div>
<div>
    Termination Document : <input id='DocumentForTermination'>
</div>
<button onclick='terminateProviderFromNetwork()'>Terminate Provider!</button>
<hr/>
<p>Events generated for the Ternimated provider:
			<h3 id='callback4'></h3>
</p>

<script type="text/javascript" src='Admin_helper.js'></script>
</body>

</html>
